<!DOCTYPE html>
<html lang="en" xmlns:c="http://www.concordion.org/2007/concordion">
<head>
    <meta charset="UTF-8"/>
    <title>Configuration</title>
</head>
<body>

<div id="title">
    <h1>Configuration</h1>

    <p>xml is key</p>
</div>

<h3>
    XML
</h3>

<p>
    As djeng models message elements into a hierarchical structure, it makes sense to use XML to define the
    configuration. The xml configuration defines codecs and the structure of message elements corresponding to the
    arrangement specific to a message format. The configuration file is then validated against a comprehensive schema
    which enforces most of the rules that defines a valid configuration.
</p>

<h3>
    Design
</h3>

<p>
    Complex message formats can easily be defined using the small set of xml elements. The structure shows how the
    elements should be used.
</p>
<ul class="tree-structure">
    <li>config</li>
    <ul>
        <li>codecs</li>
        <ul>
            <li>filter-codec</li>
            <li>element-codec</li>
            <ul>
                <li>filter</li>
            </ul>
            <li>composite-codec</li>
            <ul>
                <li>filter</li>
            </ul>
        </ul>
        <li>message-elements</li>
        <ul>
            <li>element</li>
            <li>composite</li>
            <ul>
                <li>element</li>
                <li>composite</li>
            </ul>
        </ul>
    </ul>
</ul>

<p>
    The 'codecs' tag contains all codec definitions. A codec definition describes a particular codec which can be
    uniquely identified by its 'id' attribute. One codec definition can be reused by any number of appropriate elements
    within the 'message-elements' tag.
</p>

<p>
    The 'message-elements' tag would contain all elements that defines the message structure. The composition
    a message would generally be reflected on the structure of the message elements although the framework is flexible
    enough to allow you to deviate from this convention to achieve a special type of encoding/decoding.
</p>

<h3>
    Schema Validation
</h3>

<p>
    The fundamental constraints are imposed by schema validation. The configuration constraints requires a <a
        href="MinimumConfigSpec.html" c:run="concordion">minimum configuration</a> which respects the following rules
    before any codecs are created
</p>
<ul>
    <li><a href="#">A codec is required to have at least an 'id' and a 'class' attribute</a></li>
    <li><a href="#">An element is required to have at least an 'index' and a 'codec' attribute</a></li>
    <li><a href="ValidNamespaceSpec.html" c:run="concordion">The core namespace should be declared</a></li>
    <li><a href="ValidIdentifiersSpec.html" c:run="concordion">Attribute values should meet the restrictions</a></li>
    <li><a href="UniqueCodecIdSpec.html" c:run="concordion">Each codec (including filters) should have a unique 'id'
        attribute</a>
    </li>
    <li><a href="UniqueElementIndexSpec.html" c:run="concordion">Elements under a 'composite' (including
        'message-elements') should have a unique 'index' attribute</a></li>
    <li><a href="MessageElementsReferenceSpec.html" c:run="concordion">The 'codec' attribute of 'message-elements' tag
        should reference a valid composite codec</a>
    </li>
    <li><a href="ElementReferenceSpec.html" c:run="concordion">The 'codec' attribute of 'element' tags should reference
        a valid element codec</a>
    </li>
    <li><a href="CompositeReferenceSpec.html" c:run="concordion">The 'codec' attribute of 'composite' tags should
        reference a valid composite codec</a>
    </li>
    <li><a href="FilterReferenceSpec.html" c:run="concordion">The 'codec' attribute of all filter elements should
        reference a valid filter codec</a></li>
    <li><a href="CodecOrderingSpec.html" c:run="concordion">The codecs should be grouped into types and defined in the
        order shown in the structure</a></li>
</ul>

<h3>
    Programmatic Validation
</h3>

<p>
    Schema validation can cover the constraints of the configuration up to a point. Where schema validation is not
    possible, programmatic validation is implemented. These rules are applied after an xml configuration passes the
    schema validation.
</p>
<ul>
    <li><a href="ValidElementCodecSpec.html" c:run="concordion">The class attribute of element-codec should be a
        decendant of ElementCodec</a></li>
    <li><a href="ValidCompositeCodecSpec.html" c:run="concordion">The class attribute of composite-codec should be a
        decendant of CompositeCodec</a></li>
    <li><a href="ValidCodecFilterSpec.html" c:run="concordion">The class attribute of filter-codec should be a decendant
        of CodecFilter</a></li>
</ul>

</body>
</html>